# 테스트 명세 가이드

**테스트 명세 가이드는 AI 에이전트**가 **BMAD 방법론(Breakthrough Method of Agile AI-Driven Development)** 안에서
테스트를 설계하고 구현할 때 따르는 표준 문서입니다.

이 문서는 **좋은 테스트 코드의 기준을 정의**하고,
**AI 에이전트가 이해하고 학습할 수 있는 명확한 테스트 작성 원칙**을 제공합니다.

---

## 🧩 테스트 작성 원칙

### 1. 간결성

- 테스트는 **핵심 동작만 검증**해야 하며, 불필요한 설정이나 데이터는 포함하지 않는다.
- **맥락 최소화**: 실행에 필요한 데이터와 환경만 로드한다.
- **효율성 유지**: 중복 렌더링, 불필요한 API 호출, 지연을 최소화한다.

### 2. 명확성

- 테스트는 **기대 동작을 명확히 표현**해야 한다.
- 이름과 설명은 `"should [동작] when [조건]"` 형식으로 작성한다.
- 테스트의 목적을 자연어로 기술하고, 코드보다 설명이 먼저 온다.

### 3. 단일성

- 하나의 테스트는 **하나의 동작만 검증**한다.
- 조건이나 결과가 다르면 별도의 테스트로 분리한다.

### 4. 독립성

- 테스트는 다른 테스트의 실행 순서나 결과에 의존하지 않아야 한다.
- 각 테스트는 완전히 **독립적으로 실행 가능**해야 한다.

### 5. 재현 가능성

- 동일한 환경에서 반복 실행할 때 항상 같은 결과를 반환해야 한다.
- 외부 요인(시간, 네트워크 상태 등)에 의존하지 않도록 한다.

### 6. 추적 가능성

- 테스트는 관련 요구사항 ID(`REQ-xxx`) 또는 명세 항목과 연결되어야 한다.
- 명세 변경 시 영향을 받는 테스트를 식별할 수 있어야 한다.

### 7. 가독성

- **AAA 패턴(Arrange–Act–Assert)** 을 따른다.
  1. **Arrange** – 테스트 준비: 렌더링, 모의 데이터 생성 등
  2. **Act** – 동작 실행: 이벤트 발생, 함수 호출 등
  3. **Assert** – 검증: 결과 확인 및 기대값 비교
- 접근성 기반 쿼리(`getByRole`, `getByLabelText`)를 우선 사용하고, `getByTestId`는 최후의 수단으로 사용한다.

---

## 🧠 좋은 테스트 코드의 특징

| 항목            | 설명                                                       |
| --------------- | ---------------------------------------------------------- |
| **명확성**      | 누구나 읽고 테스트 목적과 기대 결과를 즉시 이해할 수 있다. |
| **단일성**      | 하나의 테스트는 하나의 동작만 검증한다.                    |
| **독립성**      | 실행 순서에 관계없이 항상 동일하게 동작한다.               |
| **재현 가능성** | 동일한 조건에서 항상 같은 결과를 낸다.                     |
| **추적 가능성** | 관련 명세 ID 또는 기능 요구사항과 직접 연결된다.           |
| **가독성**      | 자연어 설명과 AAA 패턴으로 구조가 명확하다.                |
| **효율성**      | 불필요한 로직 없이 필요한 검증만 수행한다.                 |

---

## ✅ 잘 작성된 테스트 체크리스트

| 구분                 | 점검 항목                                                          | 확인 |
| -------------------- | ------------------------------------------------------------------ | ---- |
| **명세 연결성**      | 테스트에 관련 요구사항 ID(`REQ-xxx`)가 명시되어 있는가?            | ☐    |
| **설명 명확성**      | `"should [동작] when [조건]"` 형식으로 테스트 설명이 작성되었는가? | ☐    |
| **단일 동작 원칙**   | 하나의 테스트가 하나의 기능만 검증하는가?                          | ☐    |
| **AAA 구조**         | Arrange–Act–Assert 단계가 명확히 구분되어 있는가?                  | ☐    |
| **독립 실행성**      | 다른 테스트나 외부 환경에 의존하지 않는가?                         | ☐    |
| **결과 일관성**      | 반복 실행 시 결과가 항상 동일한가?                                 | ☐    |
| **코드 간결성**      | 불필요한 렌더링, API 호출, 주석이 없는가?                          | ☐    |
| **접근성 우선 쿼리** | `getByRole` 또는 `getByLabelText`를 우선 사용했는가?               | ☐    |
| **테스트 속도**      | 실행이 불필요하게 느리지 않은가?                                   | ☐    |
